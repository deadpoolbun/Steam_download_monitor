
# Steam Download Monitor

Скрипт на Python для мониторинга скорости загрузки игр в Steam и определения состояния загрузки конкретных игр в очереди.

Не зависит от пути установки Steam.

---

## Возможности

- Определение пути установки Steam через реестр Windows
- Получение **текущей скорости загрузки** из `content_log.txt`
- Определение **состояния загрузки игры** через `appmanifest_<appid>.acf`
- Поддержка очереди загрузок (несколько игр)
- Периодический вывод информации в консоль
- Корректная остановка через `Ctrl + C`

---

## Архитектура решения

### Источник скорости загрузки
Скорость берётся из лога Steam:
```
Steam/logs/content_log.txt
```
Парсится строка вида:
```
Current download rate: 90.987 Mbps
```
Скорость автоматически конвертируется в **MiB/s**.

### Определение состояния игры
Для каждой игры используется файл:
```

steamapps/appmanifest_<appid>.acf

```

Игра считается:
- **Downloading**, если:
  - `"UpdateResult" == "0"`
  - `"SizeOnDisk" == "0"`
- **Paused**, если:
  - `"UpdateResult" == "4"`
  - `"SizeOnDisk" == "0"`

Идентификатор игры (`appid`) определяется по имени папки в:
```

steamapps/downloading

```

## Запуск

### Требования
- Windows 10 / 11
- Python 3.8+
- Установленный Steam

### Запуск
```bash
python steammonitor.py
````

---

## Параметры мониторинга

В начале файла можно изменить:

```python
INTERVAL = 60      # интервал обновления (сек)
ITERATIONS = 5     # количество итераций (по умолчанию 5 минут)
```

---

## Пример вывода

```
[01:24:30] Итерация 2/5
 Cyberpunk 2077
 11.34 MiB/s | Downloading
```

---

## Завершение работы

Для досрочного завершения нажмите:

```
Ctrl + C
```

---

## Ограничения

* Скрипт определяет **глобальную скорость загрузки Steam**, так как клиент Steam загружает только одну игру одновременно.
* Формат логов Steam не является официальным API и может измениться в будущих версиях клиента.

---

## Используемые технологии

* Python
* Windows Registry (`winreg`)
* Парсинг текстовых логов
* Файлы конфигурации Steam (`.acf`)
